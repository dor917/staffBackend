/* 유저 */
CREATE TABLE DBA_STAFF.USERS (
	NO VARCHAR2(10) NOT NULL, /* 번호 */
	ID VARCHAR2(50), /* 아이디 */
	PASSWORD VARCHAR2(50), /* 비밀번호 */
	CRE_DATE DATE /* 날짜 */
);

COMMENT ON TABLE DBA_STAFF.USERS IS '유저';

COMMENT ON COLUMN DBA_STAFF.USERS.NO IS '번호';

COMMENT ON COLUMN DBA_STAFF.USERS.ID IS '아이디';

COMMENT ON COLUMN DBA_STAFF.USERS.PASSWORD IS '비밀번호';

COMMENT ON COLUMN DBA_STAFF.USERS.CRE_DATE IS '날짜';

CREATE UNIQUE INDEX DBA_STAFF.PK_USERS
	ON DBA_STAFF.USERS (
		NO ASC
	);

ALTER TABLE DBA_STAFF.USERS
	ADD
		CONSTRAINT PK_USERS
		PRIMARY KEY (
			NO
		);

/* 유저 프로젝트 */
CREATE TABLE DBA_STAFF.USER_PROJECT (
	U_NO VARCHAR2(10) NOT NULL, /* 유저번호 */
	P_NO VARCHAR2(10) NOT NULL, /* 프로젝트번호 */
	NO VARCHAR2(10) NOT NULL, /* 번호 */
	CRE_DATE DATE /* 날짜 */
);

COMMENT ON TABLE DBA_STAFF.USER_PROJECT IS '유저 프로젝트';

COMMENT ON COLUMN DBA_STAFF.USER_PROJECT.U_NO IS '유저번호';

COMMENT ON COLUMN DBA_STAFF.USER_PROJECT.P_NO IS '프로젝트번호';

COMMENT ON COLUMN DBA_STAFF.USER_PROJECT.NO IS '번호';

COMMENT ON COLUMN DBA_STAFF.USER_PROJECT.CRE_DATE IS '날짜';

CREATE UNIQUE INDEX DBA_STAFF.PK_USER_PROJECT
	ON DBA_STAFF.USER_PROJECT (
		U_NO ASC,
		P_NO ASC,
		NO ASC
	);

ALTER TABLE DBA_STAFF.USER_PROJECT
	ADD
		CONSTRAINT PK_USER_PROJECT
		PRIMARY KEY (
			U_NO,
			P_NO,
			NO
		);

/* 프로젝트 */
CREATE TABLE DBA_STAFF.PROJECTS (
	NO VARCHAR2(10) NOT NULL, /* 번호 */
	PROJECTNAME VARCHAR2(20), /* 프로젝트명 */
	CRE_DATE DATE /* 날짜 */
);

COMMENT ON TABLE DBA_STAFF.PROJECTS IS '프로젝트';

COMMENT ON COLUMN DBA_STAFF.PROJECTS.NO IS '번호';

COMMENT ON COLUMN DBA_STAFF.PROJECTS.PROJECTNAME IS '프로젝트명';

COMMENT ON COLUMN DBA_STAFF.PROJECTS.CRE_DATE IS '날짜';

CREATE UNIQUE INDEX DBA_STAFF.PK_PROJECTS
	ON DBA_STAFF.PROJECTS (
		NO ASC
	);

ALTER TABLE DBA_STAFF.PROJECTS
	ADD
		CONSTRAINT PK_PROJECTS
		PRIMARY KEY (
			NO
		);

/* 캘린더 일정 */
CREATE TABLE DBA_STAFF.CALENDARS (
	NO VARCHAR2(10) NOT NULL, /* 번호 */
	P_NO VARCHAR2(10) NOT NULL, /* 프로젝트번호 */
	TITLE VARCHAR2(30), /* 제목 */
	CONTENT VARCHAR2(40), /* 내용 */
	START_DATE DATE, /* 시작일 */
	END_DATE DATE, /* 종료일 */
	CRE_DATE DATE /* 날짜 */
);

COMMENT ON TABLE DBA_STAFF.CALENDARS IS '캘린더 일정';

COMMENT ON COLUMN DBA_STAFF.CALENDARS.NO IS '번호';

COMMENT ON COLUMN DBA_STAFF.CALENDARS.P_NO IS '프로젝트번호';

COMMENT ON COLUMN DBA_STAFF.CALENDARS.TITLE IS '제목';

COMMENT ON COLUMN DBA_STAFF.CALENDARS.CONTENT IS '내용';

COMMENT ON COLUMN DBA_STAFF.CALENDARS.START_DATE IS '시작일';

COMMENT ON COLUMN DBA_STAFF.CALENDARS.END_DATE IS '종료일';

COMMENT ON COLUMN DBA_STAFF.CALENDARS.CRE_DATE IS '날짜';

CREATE UNIQUE INDEX DBA_STAFF.PK_CALENDARS
	ON DBA_STAFF.CALENDARS (
		NO ASC,
		P_NO ASC
	);

ALTER TABLE DBA_STAFF.CALENDARS
	ADD
		CONSTRAINT PK_CALENDARS
		PRIMARY KEY (
			NO,
			P_NO
		);

ALTER TABLE DBA_STAFF.USER_PROJECT
	ADD
		CONSTRAINT FK_USERS_TO_USER_PROJECT
		FOREIGN KEY (
			U_NO
		)
		REFERENCES DBA_STAFF.USERS (
			NO
		);

ALTER TABLE DBA_STAFF.USER_PROJECT
	ADD
		CONSTRAINT FK_PROJECTS_TO_USER_PROJECT
		FOREIGN KEY (
			P_NO
		)
		REFERENCES DBA_STAFF.PROJECTS (
			NO
		);

ALTER TABLE DBA_STAFF.CALENDARS
	ADD
		CONSTRAINT FK_PROJECTS_TO_CALENDARS
		FOREIGN KEY (
			P_NO
		)
		REFERENCES DBA_STAFF.PROJECTS (
			NO
		);